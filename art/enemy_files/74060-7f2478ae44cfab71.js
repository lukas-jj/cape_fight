!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0a52b6da-89a3-433b-a13c-60b6598cb56a",e._sentryDebugIdIdentifier="sentry-dbid-0a52b6da-89a3-433b-a13c-60b6598cb56a")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74060],{73407:function(e,t,r){r.d(t,{J:function(){return a}});let a=()=>null},88116:function(e,t,r){r.d(t,{B:function(){return i}});var a=r(85893);let i=()=>(0,a.jsx)("div",{"data-aaad":"true","data-aa-adunit":"/275516369/ImageResizer_BottomLeaderboard"})},7283:function(e,t,r){r.d(t,{e:function(){return i}});var a=r(85893);let i=()=>(0,a.jsx)("div",{"data-aaad":"true","data-aa-adunit":"/275516369/ImageResizer_TopLeaderboard"})},33723:function(e,t,r){var a=r(85893),i=r(85763);t.Z=e=>{let{children:t,placeHolder:r}=e,{shouldShowAds:n}=(0,i.Z)();return n?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(a.Fragment,{children:null!=r?r:null})}},74060:function(e,t,r){r.d(t,{H:function(){return c}});var a=r(85893),i=r(88116),n=r(7283),l=r(72040),d=r(73407),o=r(9529),s=r(33723);let c=e=>{var t;let{leftBar:r,controlBar:c,preview:u,bottomMenu:m,navbar:x,action:f,config:h}=e,{width:v,bottomMenuRef:g,isLandscape:p}=(0,l.K)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"max-w-1440 ".concat(!(null==h?void 0:h.disableShadow)&&"page-shadow"," max-h-screen h-screen flex flex-col"),children:[(0,a.jsx)("div",{className:"z-20 flex-grow-0 flex-shrink-0",children:x}),(0,a.jsxs)("div",{className:"flex flex-grow w-full h-full min-h-0 overflow-x-auto overflow-y-hidden",children:[(0,a.jsx)("div",{className:"hidden h-full text-black bg-white border-r lg:block border-r-irGray-200 dark:border-r-darkSurface-600 dark:bg-darkSurface-100 dark:text-white",style:{minWidth:"250px",width:"360px",maxWidth:"360px",...null!==(t=null==h?void 0:h.leftBar)&&void 0!==t?t:{}},children:r}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col h-full min-w-728-pc w-full min-h-0 max-h-full overflow-y-hidden gap-2.5 dark:bg-darkSurface-100",children:[f&&c&&(0,a.jsx)("div",{className:"sticky top-0 z-10 items-center hidden w-full bg-white lg:flex",children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full border-b border-b-irGray-200 dark:border-b-darkSurface-600",children:[(0,a.jsx)("div",{className:"w-full",children:c}),f.desktop&&(0,a.jsx)("div",{className:"mr-4",children:f.desktop})]})}),(0,a.jsx)(s.Z,{placeHolder:(0,a.jsx)("div",{}),children:!(null==h?void 0:h.hideTopAd)&&!p&&!(null==h?void 0:h.showBanner)&&(0,a.jsxs)("div",{className:"py-[5px] border-b border-b-irGray-200 dark:border-b-darkSurface-600 relative",children:[(0,a.jsx)("div",{className:"flex-grow-0 flex-shrink-0 flex items-center justify-center mx-auto w-[320px] md:w-[728px] h-[50px] md:h-[90px]",children:(0,a.jsx)(n.e,{})}),(0,a.jsx)("div",{className:"absolute right-0 top-0 text-xs capitalize bg-irGray-200 dark:bg-darkSurface-300 dark:text-white py-0.5 px-1",children:(0,a.jsx)(o.vN,{keyName:"common:advertisement"})})]})}),(null==h?void 0:h.showBanner)&&(0,a.jsx)("div",{className:"flex items-center justify-center py-4 mx-4 lg:py-2",children:(0,a.jsx)(d.J,{})}),(0,a.jsx)("div",{className:"flex-grow w-full min-h-0 scroll",children:u}),(0,a.jsx)(s.Z,{children:!(null==h?void 0:h.hideBottomAd)&&!p&&(0,a.jsxs)("div",{className:"py-[5px] border-t border-t-irGray-200 dark:border-t-darkSurface-600 relative",children:[(0,a.jsx)("div",{className:"flex-grow-0 flex-shrink-0 lg:flex items-center justify-center mx-auto w-[320px] md:w-[728px] h-[50px] md:h-[90px]",children:(0,a.jsx)(i.B,{})}),(0,a.jsx)("div",{className:"absolute right-0 top-0 text-xs capitalize bg-irGray-200 dark:bg-darkSurface-300 dark:text-white py-0.5 px-1",children:(0,a.jsx)(o.vN,{keyName:"common:advertisement"})})]})}),(0,a.jsx)(s.Z,{children:v<1024?(0,a.jsx)("div",{className:"flex-grow-0 flex-shrink-0 w-full",style:{minHeight:g.current?"".concat(g.current.getBoundingClientRect().height,"px"):"78px"}}):(0,a.jsx)("div",{})})]})]}),(0,a.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-30 block lg:hidden",ref:g,children:m})]}),(0,a.jsx)("div",{id:"placeholder"})]})}},72040:function(e,t,r){r.d(t,{K:function(){return s}});var a=r(8284),i=r(29869),n=r(4250),l=r(69233),d=r(67294),o=r(85763);let s=()=>{let{width:e}=(0,i.i)(),t=(0,d.useRef)(null),r=(0,a.e)(),[s,c]=(0,d.useState)(!1),{shouldShowAds:u}=(0,o.Z)(),m=()=>{r(()=>{c(e=>{let t=window.innerHeight<window.innerWidth;return!t&&e&&((0,l.b)(),u&&(0,n.V)()),t})})};return(0,d.useEffect)(()=>{if(!(e>768))return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[]),{width:e,bottomMenuRef:t,isLandscape:s}}},85763:function(e,t,r){var a=r(66083);t.Z=()=>{let{userType:e}=(0,a.W)();return{shouldShowAds:"free"===e}}},8284:function(e,t,r){r.d(t,{e:function(){return i}});let a=null,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return t=>{a&&clearTimeout(a),a=setTimeout(()=>{t()},e)}}},66083:function(e,t,r){r.d(t,{W:function(){return j}});var a=r(85893),i=r(82886),n=r(9529),l=r(85158),d=r(69391),o=r(77801),s=r(10777),c=r(98029),u=r(11163),m=r(67294),x=r(45777),f=r(7727);let h=async()=>{try{let{data:e}=await f.Z.post("".concat("https://api.imageresizer.com","/daily-quota/consume"));return{data:e,error:null}}catch(e){return{data:null,error:{message:e.message}}}},v=()=>({mutationFn:h,retry:5});var g=r(59602),p=r(41664),y=r.n(p),w=r(70300);let b="ir-user-type",j=()=>{let e=(0,l.g)(),{data:t,isFetching:r,isLoading:f}=(0,s.a)((0,g.o)()),h=(0,c.D)(v()),p=(null==t?void 0:t.data)||null,[j,k]=(0,m.useState)("free"),N=(0,u.useRouter)(),{t:S}=(0,w.$G)(),T=async()=>await e.ensureQueryData((0,g.o)()),z=async()=>{var t;let{data:r}=await T();if(!r)throw Error("Failed to fetch daily quota information");let a=(new Date().getTime()-r.fetchedAt)/1e3>30;if((null===(t=e.getQueryState((0,g.o)().queryKey))||void 0===t?void 0:t.fetchStatus)!=="fetching"&&r.fetchedAt&&a){await e.refetchQueries((0,g.o)());let t=await T();t.data&&(r=t.data)}return r},D=async()=>{let e=await z();return null===e.limit?1/0:Math.max(e.limit-e.usage,0)},E=t=>{e.setQueryData((0,g.o)().queryKey,e=>{let r=structuredClone(e);return(null==r?void 0:r.data)&&(r.data.usage+=t),r})},I=(0,o.V)("common:max-file-size-error-title"),Q="".concat((0,o.V)("common:max-file-size-error-description",{size:p?(0,d.t)(p.fileSizeLimit):"10 MB"})),B=()=>"ultra"===localStorage.getItem(b)?null:(0,a.jsx)(n.vN,{keyName:"common:upgrade-to-convert-larger-files",overrideValue:R,linkRenderer:e=>(0,a.jsx)(y(),{href:q,className:"underline",onClick:e=>e.stopPropagation(),children:e})}),V=async()=>{let{data:e}=await T();return e&&"ultra"===e.userType?100:e&&"pro"===e.userType?20:5},q="en"===N.locale?"/pricing":"/".concat(N.locale,"/").concat(x.Z["/pricing"][N.locale||"en"]),_=(0,o.V)("common:batch-limit-exceeded-title"),A=(0,o.V)("common:batch-limit-exceeded-msg",{size:"--"}),R=S("common:please-upgrade"),Z=()=>"ultra"===localStorage.getItem(b)?null:(0,a.jsx)(n.vN,{keyName:"common:please-upgrade",overrideValue:R,linkRenderer:e=>(0,a.jsx)(y(),{href:q,className:"underline",onClick:e=>e.stopPropagation(),children:e})}),C=async()=>{let e=await V();(0,i.Am)({title:_,description:(0,a.jsxs)("div",{children:[A.replace("--","".concat(e)),(0,a.jsx)(Z,{})]}),variant:"destructive",duration:1/0})},F=(0,o.V)("common:quota-limit-exceeded-toast-title"),L=(0,o.V)("common:quota-limit-exceeded-toast-description"),G=(0,o.V)("common:quota-limit-exceeded-deleted-images-toast-description"),K=S("common:upgrade-to-continue"),W=()=>"ultra"===localStorage.getItem(b)?null:(0,a.jsx)(n.vN,{keyName:"common:upgrade-to-continue",overrideValue:K,linkRenderer:e=>(0,a.jsx)(y(),{href:q,className:"underline",onClick:e=>e.stopPropagation(),children:e})});return(0,m.useEffect)(()=>{if(!p){let e=localStorage.getItem(b);e&&(0,m.startTransition)(()=>k(e));return}(0,m.startTransition)(()=>k(p.userType)),localStorage.setItem(b,p.userType)},[null==p?void 0:p.userType]),{userType:j,usageDetail:p,getRemainingQuota:D,ensureUsageDetail:T,isFetching:r,isLoading:f,invalidateDailyUsageQuery:()=>{e.invalidateQueries((0,g.o)())},consumeQuota:E,consumeQuotaByFrontendTool:()=>{E(1),h.mutate(void 0,{onSuccess:t=>{e.setQueryData((0,g.o)().queryKey,e=>{var r;let a=structuredClone(e);return(null==a?void 0:a.data)&&(a.data=null!==(r=t.data)&&void 0!==r?r:a.data),a})}})},showMaxFileSizeErrorToast:()=>{(0,i.Am)({title:I,description:(0,a.jsxs)(a.Fragment,{children:[Q,(0,a.jsx)(B,{})]}),variant:"destructive",duration:1/0})},getBatchLimit:V,showBatchLimitErrorToast:C,showQuotaLimitExceededToast:()=>{(0,i.Am)({title:F,description:(0,a.jsxs)("div",{children:[L," ",(0,a.jsx)(Z,{})]}),variant:"destructive",duration:1/0})},showQuotaLimitExceededDeletedImagesToast:()=>{(0,i.Am)({title:F,description:(0,a.jsxs)("div",{children:[G," ",(0,a.jsx)(W,{})]}),variant:"destructive",duration:1/0})},getRemainingQuotaSynchronously:()=>{let t=e.getQueryData((0,g.o)().queryKey);if(!t||!t.data||t.error)throw Error("Usage detail not fetched yet");let{limit:r,usage:a}=t.data;return null===r?1/0:Math.max(r-a,0)},getBatchLimitSynchronously:()=>{let t=e.getQueryData((0,g.o)().queryKey);if(!t||!t.data||t.error)throw Error("Usage detail not fetched yet");let r=t.data.userType;return"ultra"===r?100:"pro"===r?20:5}}}}}]);
//# sourceMappingURL=74060-7f2478ae44cfab71.js.map