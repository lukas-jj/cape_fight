!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="26b8349b-65c0-4b8f-8dad-5d855b842c93",e._sentryDebugIdIdentifier="sentry-dbid-26b8349b-65c0-4b8f-8dad-5d855b842c93")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35735],{44362:function(e,t,n){n.d(t,{p:function(){return s}});var i=n(85893),a=n(57851);let s=e=>{let{width:t,height:n,className:s}=e;return(0,i.jsx)("svg",{width:null!=t?t:18,height:null!=n?n:20,viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M8.99918 1.27776e-08C9.8076 -7.26652e-05 10.5853 0.309897 11.172 0.866056C11.7587 1.42222 12.1097 2.18221 12.1529 2.98947L12.1571 3.15789H16.7887C16.9487 3.15794 17.1027 3.21873 17.2196 3.32798C17.3366 3.43722 17.4077 3.58678 17.4186 3.74643C17.4295 3.90607 17.3794 4.06391 17.2784 4.18804C17.1774 4.31217 17.0331 4.39335 16.8745 4.41516L16.7887 4.42105H15.8969L14.8695 17.0973C14.8054 17.8881 14.446 18.6258 13.8627 19.1636C13.2794 19.7015 12.5151 20.0001 11.7217 20H6.27665C5.48326 20.0001 4.71891 19.7015 4.13566 19.1636C3.5524 18.6258 3.19297 17.8881 3.12886 17.0973L2.10065 4.42105H1.2097C1.05708 4.42105 0.909627 4.36577 0.794605 4.26546C0.679583 4.16514 0.604776 4.02657 0.58402 3.87537L0.578125 3.78947C0.578131 3.63685 0.633403 3.4894 0.733718 3.37437C0.834034 3.25935 0.972606 3.18455 1.12381 3.16379L1.2097 3.15789H5.84128C5.84128 2.32037 6.17399 1.51715 6.76621 0.924926C7.35843 0.332706 8.16165 1.27776e-08 8.99918 1.27776e-08V1.27776e-08ZM14.6303 4.42105H3.36802L4.38781 16.9954C4.42632 17.4698 4.64201 17.9124 4.992 18.2351C5.34199 18.5578 5.80061 18.7369 6.27665 18.7368H11.7217C12.1977 18.7369 12.6564 18.5578 13.0064 18.2351C13.3563 17.9124 13.572 17.4698 13.6105 16.9954L14.6295 4.42105H14.6303ZM7.10444 7.57895C7.25706 7.57895 7.40452 7.63423 7.51954 7.73454C7.63456 7.83486 7.70937 7.97343 7.73013 8.12463L7.73602 8.21053V14.9474C7.73597 15.1074 7.67518 15.2614 7.56594 15.3784C7.45669 15.4953 7.30714 15.5664 7.14749 15.5773C6.98784 15.5882 6.83001 15.5381 6.70587 15.4371C6.58174 15.3361 6.50057 15.1918 6.47876 15.0333L6.47286 14.9474V8.21053C6.47286 8.04302 6.5394 7.88238 6.65785 7.76393C6.77629 7.64549 6.93694 7.57895 7.10444 7.57895V7.57895ZM10.8939 7.57895C11.0465 7.57895 11.194 7.63423 11.309 7.73454C11.424 7.83486 11.4988 7.97343 11.5196 8.12463L11.5255 8.21053V14.9474C11.5254 15.1074 11.4647 15.2614 11.3554 15.3784C11.2462 15.4953 11.0966 15.5664 10.937 15.5773C10.7773 15.5882 10.6195 15.5381 10.4953 15.4371C10.3712 15.3361 10.29 15.1918 10.2682 15.0333L10.2623 14.9474V8.21053C10.2623 8.04302 10.3289 7.88238 10.4473 7.76393C10.5658 7.64549 10.7264 7.57895 10.8939 7.57895ZM8.99918 1.26316C8.51907 1.2631 8.05684 1.4453 7.70591 1.77294C7.35498 2.10058 7.14151 2.54923 7.10865 3.02821L7.10444 3.15789H10.8939L10.8897 3.02821C10.8568 2.54923 10.6434 2.10058 10.2924 1.77294C9.94151 1.4453 9.47928 1.2631 8.99918 1.26316V1.26316Z",className:(0,a.m)("fill-black dark:fill-white hover:fll-red-500 group-hover:fill-white dark:hover:fill-red-500 dark:group-hover:fill-red-500",s)})})}},77591:function(e,t,n){n.d(t,{p:function(){return l}});let{addToast:i,removeToast:a,removeBatch:s}=n(86203).toastsSlice.actions;var r=n(57989),o=n(74578);let l=()=>{let e=(0,r.TL)();return{toast:t=>{let n=(0,o.w)();return e(i({toast:{id:n,...t}})),t.time&&setTimeout(()=>{e(a({id:n}))},t.time),n},removeToast:t=>e(a({id:t})),removeBatch:t=>e(s({batch:t}))}}},77158:function(e,t,n){n.d(t,{z:function(){return o}});var i=n(85893),a=n(71271),s=n(6806),r=n(9529);let o=e=>{let{isOpen:t,close:n,handleRetry:o}=e;return(0,i.jsx)(s.u,{isOpen:t,close:n,children:(0,i.jsxs)("div",{className:"relative bg-white dark:bg-darkSurface-300 rounded-md p-4 lg:p-8 text-black flex flex-col my-auto gap-4",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{className:"absolute right-4 top-4 cursor-pointer focus:outline focus:outline-2 focus:outline-irBlue-600",onClick:n,children:(0,i.jsx)(a.T,{strokeWidth:4})}),(0,i.jsx)("div",{className:"text-red-500 text-xl font-semibold",children:(0,i.jsx)(r.vN,{keyName:"common:google-drive-access-error-title"})}),(0,i.jsx)("div",{className:"text-black dark:text-white",children:(0,i.jsx)(r.vN,{keyName:"common:google-drive-access-error-description",linkRenderer:(e,t)=>"link:regrant"===t?(0,i.jsx)("button",{className:"cursor-pointer text-irBlue-400 dark:text-darkPrimary-500",onClick:o,children:e},t):(0,i.jsx)("a",{href:"/images/fix-google-permission.png",className:"cursor-pointer text-irBlue-600 dark:text-darkPrimary-500",target:"_blank",children:e},t)})}),(0,i.jsxs)("div",{className:"mt-8 ml-auto flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:n,className:"py-2 px-8 bg-red-500 rounded-xl hover:bg-red-700 text-white capitalize",children:(0,i.jsx)(r.vN,{keyName:"common:cancel"})}),(0,i.jsx)("button",{onClick:o,className:"py-2 px-16 bg-irBlue-200 dark:bg-darkPrimary-500 dark:text-black rounded-xl hover:bg-irBlue-600 text-white capitalize",children:(0,i.jsx)(r.vN,{keyName:"common:retry"})})]})]})})}},82917:function(e,t,n){n.d(t,{G:function(){return u}});var i=n(85893),a=n(90668),s=n(9529),r=n(66083),o=n(207),l=n(41664),c=n.n(l),h=n(11163),d=n(45777);let u=()=>{let{userType:e,usageDetail:t,isLoading:n}=(0,r.W)(),l=(0,h.useRouter)();return n?(0,i.jsx)("div",{children:(0,i.jsx)(a.a,{height:20})}):t?(0,i.jsxs)("div",{children:[(0,i.jsx)(s.vN,{keyName:"common:max-file-size"}),": ",(0,o.s)(t.fileSizeLimit),(()=>{let n="en"===l.locale?"/pricing":"/".concat(l.locale,"/").concat(d.Z["/pricing"][l.locale||"en"]);return"free"===e&&t.isRegistered||"pro"===e?(0,i.jsxs)("span",{children:["."," ",(0,i.jsx)(s.vN,{keyName:"common:upgrade-for-more",linkRenderer:e=>(0,i.jsx)(c(),{href:n,className:"underline",onClick:e=>e.stopPropagation(),children:e})}),"."]}):"free"===e?(0,i.jsxs)("span",{children:["."," ",(0,i.jsx)(s.vN,{keyName:"common:sign-up-for-more",linkRenderer:e=>(0,i.jsx)(c(),{href:n,className:"underline",onClick:e=>e.stopPropagation(),children:e})}),"."]}):""})()]}):null}},50239:function(e,t,n){n.d(t,{g:function(){return i}});let i=120},51732:function(e,t,n){n.d(t,{h:function(){return a},s:function(){return s}});var i=n(40524);let a=10,s=(e,t,n,s)=>{let r=(e,t)=>!(0===e||t>=a),o=(e,t)=>!(e+t<a);return{handleBatchedSingleFile:async(n,a)=>{s||o(a,t().length)||(await (0,i._)(100),e(n))},proceedNextImports:async()=>{if(s)return;await (0,i._)(1e3);let o=t(),l=n();r(l.length,o.length)&&l.slice(0,a-o.length).forEach(t=>{e(t)})}}}},2402:function(e,t,n){n.d(t,{U:function(){return r}});var i=n(95429),a=n(67294);let s=[],r=e=>{let t=async(t,a,r)=>{e.onStart(a,r,0);let o=new i.O(a,t,{...e,onOfflineLimitReach:n},r);await o.startImport(),s.push(o)},n=(t,n)=>{e.onOfflineLimitReach&&e.onOfflineLimitReach(t,n);let i=s.find(e=>e.task.id===t.id);null==i||i.cancel()};return(0,a.useEffect)(()=>()=>{(void 0===e.shouldCancelOnUnmount||!1!==e.shouldCancelOnUnmount)&&s.forEach(e=>e.cancel())},[]),{handleDeviceCancel:e=>{let t=s.find(t=>t.task.id===e.id);null==t||t.cancel()},handleDeviceImport:t,handleCancelAllDeviceImports:()=>{s.forEach(e=>e.cancel())}}}},95094:function(e,t,n){n.d(t,{g:function(){return o}});var i=n(78721);class a{async startTask(){this.init();let e=new i.M(this.task,{handleDisconnect:this.handleDisconnect,handleReconnect:this.handleReconnect,handleTaskComplete:this.handleComplete,handleTaskFail:this.handleTaskFail,onOfflineLimitReach:this.handleOnOfflineLimitReach});await e.appendTask()}init(){this.options.onStart(this.task,this.metaData)}cancel(){}destroy(){}constructor(e,t,n){this.isComplete=!1,this.handleDisconnect=()=>{this.options.onDisconnect&&this.options.onDisconnect(this.task,this.metaData)},this.handleReconnect=()=>{this.options.onReconnect&&this.options.onReconnect(this.task,this.metaData)},this.handleOnOfflineLimitReach=e=>{this.options.onOfflineLimitReach&&this.options.onOfflineLimitReach(e,this.metaData)},this.handleComplete=e=>{this.isComplete||(this.isComplete=!0,this.options.onComplete(e,this.metaData),this.destroy())},this.handleTaskFail=e=>{this.options.onFailure(e,this.metaData),this.destroy()},this.task=e,this.options=t,this.metaData=n}}var s=n(67294);let r=[],o=e=>{let t=async(t,n)=>{let i=new a(t,e,n);await i.startTask(),r.push()};return(0,s.useEffect)(()=>()=>{r.forEach(e=>e.destroy())},[]),{handleExternalImport:t}}},88609:function(e,t,n){n.d(t,{N:function(){return a}});var i=n(67294);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=(0,i.useRef)(null);return n=>{t.current&&clearTimeout(t.current),t.current=setTimeout(n,e)}}},92869:function(e,t,n){n.d(t,{T:function(){return o}});var i=n(12341),a=n(67294),s=n(68711),r=n(88609);let o=(e,t,n)=>{let[o,l]=(0,a.useState)(!1),c=(0,r.N)(300),h=(0,r.N)(300),d=e=>{e.preventDefault()},u=e=>{l(!0),e.preventDefault()},m=e=>{e.preventDefault()},f=e=>{h(()=>l(!1)),e.preventDefault()},p=e=>{h(()=>l(!0)),e.preventDefault()},v=e=>{e.preventDefault()},g=e=>{if(h(()=>l(!1)),e.preventDefault(),e.dataTransfer&&e.dataTransfer.items&&e.dataTransfer.items[0]){let n=e.dataTransfer.items,a=[];for(let e=0;e<n.length;e++){var t;let s=null===(t=n[e])||void 0===t?void 0:t.getAsFile();s&&a.push((0,i.L)(s))}C(a)}},{validateFiles:k}=(0,s.d)(n.supportedExtensions),C=e=>{c(()=>t(k(e),"device",{}))},y=()=>{e&&(e.addEventListener("drag",g),e.addEventListener("dragenter",u),e.addEventListener("dragstart",m),e.addEventListener("dragleave",f),e.addEventListener("dragover",p),e.addEventListener("dragend",v),e.addEventListener("drop",g))};return(0,a.useEffect)(()=>(y(),()=>{e&&(e.removeEventListener("drag",d),e.removeEventListener("dragenter",u),e.removeEventListener("dragstart",m),e.removeEventListener("dragleave",f),e.removeEventListener("dragover",p),e.removeEventListener("dragend",v),e.removeEventListener("drop",g))}),[e]),{isDragging:o}}},891:function(e,t,n){n.d(t,{e:function(){return a}});var i=n(66083);let a=()=>{let{ensureUsageDetail:e}=(0,i.W)();return{validateMaxFileSize:async t=>{let{data:n,error:i}=await e();return!i&&!!n&&t.every(e=>e<=n.fileSizeLimit)}}}},95429:function(e,t,n){n.d(t,{O:function(){return u}});var i=n(72383),a=n(65342),s=n.n(a),r=n(69391);let o=(e,t,n)=>{let i=Number(t)*n/100,a=(0,r.t)(i/e);return"".concat(Math.round(Number(a.split(" ")[0]))," ").concat(a.split(" ")[1])};var l=n(78721),c=n(97885),h=n(7727),d=n(50239);class u{async startImport(){let e=new l.M(this.task,{handleDisconnect:this.handleDisconnect,handleReconnect:this.handleReconnect,handleTaskComplete:e=>{this.handleTaskComplete(e)},handleTaskFail:this.handleTaskFail,onOfflineLimitReach:this.handleOfflineLimit});await e.appendTask(!1),this.init()}init(){var e,t;this.r&&this.r.pause();let n=null===(t=this.task.result)||void 0===t?void 0:null===(e=t.form)||void 0===e?void 0:e.url.toString();if(!n||!this.file||!this.file.file){this.options.onFailure(this.task,this.metaData);return}let a=this.file.file,r=(0,i.Z)(this.file.file),l=new(s())({chunkRetryInterval:3e3,target:n.replace("api/upload","api/resumable").replace("server","s"),chunkSize:2097152,forceChunkSize:!0,prioritizeFirstAndLastChunk:!0,testChunks:!1,generateUniqueIdentifier:()=>{let e=a.webkitRelativePath||a.name,t=a.size;return e.length<40?t+"-"+Math.floor(1e3*Math.random()+5e3)+"-"+e.replace(/[^0-9a-zA-Z_-]/gim,"")+"."+r:t+"-"+Math.floor(1e3*Math.random()+5e3)+"-"+(e=e.replace(/[^0-9a-zA-Z_-]/gim,"")).substring(0,20)+"-"+e.substring(e.length-20)+"."+r}});this.r=l;let c=new Date;l.addFile(this.file.file),l.on("fileAdded",()=>{l.upload()}),l.on("fileError",()=>{this.options.onFailure(this.task,this.metaData)}),l.on("fileProgress",()=>{let e=Math.round(100*l.progress()),t=(new Date().getTime()-c.getTime())/1e3;this.options.onProgress(this.task,e,o(t,e,this.file.file.size),this.metaData)}),l.on("fileSuccess",(e,t)=>{let n=JSON.parse(t).fileUploadStatus;("done"===n||"partly_done"===n)&&l.on("complete",()=>{"resumable"===this.state&&this.handleJoin()})})}cancel(){this.r&&(this.r.pause(),this.r.cancel(),this.r=null,this.options={onComplete:()=>{},onFailure:()=>{},onOfflineLimitReach:()=>{},onProgress:()=>{}})}handleJoin(){var e,t,n,i,a,s;if(this.state="join",this.joinTryCount>d.g){this.handleTaskFail(this.task);return}this.joinTryCount++,console.log("handleJoin trying for ".concat(this.joinTryCount," time(s)"));let r=null===(t=this.task.result)||void 0===t?void 0:null===(e=t.form)||void 0===e?void 0:e.url.toString();if(!r||!this.r||!(null===(i=this.task.result)||void 0===i?void 0:null===(n=i.form)||void 0===n?void 0:n.parameters.signature))return;let o=new FormData;o.append("identifier",this.getIdentifier()),o.append("signature",null!==(s=null===(a=this.task.result.form)||void 0===a?void 0:a.parameters.signature)&&void 0!==s?s:""),h.Z.post(r.replace("api/upload","api/resumable/join").replace("server","s"),o).then(()=>{this.handleConfirm()}).catch(()=>{setTimeout(()=>{console.log("retrying handleJoin"),this.handleJoin()},5e3)})}handleConfirm(){var e,t,n,i,a,s;if(this.state="confirm",this.confirmTryCount>d.g){this.handleTaskFail(this.task);return}this.confirmTryCount++;let r=null===(t=this.task.result)||void 0===t?void 0:null===(e=t.form)||void 0===e?void 0:e.url.toString();if(!r||!this.r||!(null===(i=this.task.result)||void 0===i?void 0:null===(n=i.form)||void 0===n?void 0:n.parameters.signature))return;let o=new FormData;o.append("identifier",this.getIdentifier()),o.append("fileName",this.file.file.name),o.append("signature",null!==(s=null===(a=this.task.result.form)||void 0===a?void 0:a.parameters.signature)&&void 0!==s?s:""),h.Z.post(r.replace("server","s"),o).then(async()=>{this.isAcknowledgementComplete=!0,this.completedTask&&!this.hasCompleted&&(this.hasCompleted=!0,this.options.onComplete(this.completedTask,this.metaData))}).catch(()=>{setTimeout(()=>{this.handleConfirm()},5e3)}),this.taskCompleteTimeout=setTimeout(()=>{this.hasCompleted||(0,c.S)("event","Upload Stuck",{event_category:"/"===window.location.pathname?"Image Resizer":window.location.pathname,event_label:"Upload"})},1e4)}getIdentifier(){return this.r?this.r.files.map(e=>e.uniqueIdentifier).join(","):""}constructor(e,t,n,i){this.completedTask=null,this.r=null,this.hasCompleted=!1,this.isAcknowledgementComplete=!1,this.taskCompleteTimeout=null,this.joinTryCount=0,this.confirmTryCount=0,this.state="resumable",this.handleTaskComplete=e=>{this.completedTask=e,this.isAcknowledgementComplete&&(this.options.onComplete(e,this.metaData),this.hasCompleted=!0,this.taskCompleteTimeout&&clearTimeout(this.taskCompleteTimeout))},this.handleOfflineLimit=e=>{this.options.onOfflineLimitReach&&this.options.onOfflineLimitReach(e,this.metaData)},this.handleTaskFail=e=>{var t,n;null===(t=this.r)||void 0===t||t.pause(),null===(n=this.r)||void 0===n||n.cancel(),this.options.onFailure(e,this.metaData),this.cancel()},this.handleReconnect=()=>{this.r&&this.r.upload(),this.options.onReconnect&&this.options.onReconnect(this.task,this.metaData)},this.handleDisconnect=()=>{this.r&&this.r.pause(),this.options.onDisconnect&&this.options.onDisconnect(this.task,this.metaData)},this.task=e,this.file=t,this.options=n,this.metaData=i}}},207:function(e,t,n){n.d(t,{s:function(){return i}});function i(e){if(e<1024)return"".concat(e," B");let t=["KB","MB","GB"],n=e/1024,i=0;for(;n>=1024&&i<t.length-1;)n/=1024,i++;return"".concat(Math.round(n)," ").concat(t[i])}},12341:function(e,t,n){n.d(t,{L:function(){return a}});var i=n(69391);let a=e=>({file:e,src:URL.createObjectURL(e),size:(0,i.t)(e.size)})},74578:function(e,t,n){n.d(t,{w:function(){return a}});var i=n(25934);let a=()=>(0,i.Z)()},40524:function(e,t,n){n.d(t,{_:function(){return i}});let i=async e=>new Promise(t=>{let n=setTimeout(()=>{t(void 0),clearTimeout(n)},null!=e?e:10)})},93012:function(e,t,n){n.d(t,{u:function(){return a}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return e.length<=t?e:"".concat([...e].splice(0,t).join(""),"...")},a=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;if(e.length<=n)return e;let a=e.split(".")[e.split(".").length-1],s=e.substring(0,e.length-(null==a?void 0:a.length));return"".concat(i(s,n),".").concat(a)}},31016:function(e,t,n){n.d(t,{x:function(){return h}});var i=n(50239),a=n(294),s=n(77591),r=n(67294),o=n(44980),l=n(57989),c=n(77801);let h=()=>{let e=(0,l.TL)(),{toast:t}=(0,s.p)(),n=(0,r.useRef)(0),h="".concat((0,c.V)("you-are-offline")," ").concat((0,c.V)("trying-to-reconnect")),d=async(t,a,s,r,l,c)=>{if(n.current>=i.g){e((0,o.ao)(t.id));return}n.current++;let h=await e(l({imageId:t.id,type:s,options:r})),u=h.payload;"fulfilled"===h.meta.requestStatus?c(t,u.result,a,s):setTimeout(()=>{d(t,a,s,r,l,c)},5e3)};return{handleCreateImportTask:async(n,i,s,r,o,l)=>{let c=await e(o({imageId:n.id,type:s,options:r})),u=c.payload;"rejected"===c.meta.requestStatus?(t({closeable:!0,position:"top-right",status:"error",text:h,time:a.w}),setTimeout(()=>{d(n,i,s,r,o,l)},5e3)):"fulfilled"===c.meta.requestStatus&&l(n,u.result,i,s)}}}}}]);
//# sourceMappingURL=35735-0112437cc0c5f33e.js.map